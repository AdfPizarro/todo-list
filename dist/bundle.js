(()=>{"use strict";let t=[];t=null===localStorage.getItem("projectList")?[]:JSON.parse(localStorage.getItem("projectList"));const e=t=>{const e=document.createElement("div");e.setAttribute("class","d-flex flex-column");const n=document.createElement("a");return n.setAttribute("class","projectButton text-decoration-none"),n.setAttribute("href","#"),n.textContent=t.name,e.appendChild(n),e};function n(){const n=document.createElement("div"),o=document.createElement("a");o.setAttribute("class","projectButton text-decoration-none"),o.setAttribute("href","#"),o.textContent="Default",n.appendChild(o);for(let o=0;o<t.length;o+=1){const r=e(t[o]);n.appendChild(r)}return n}function o(e){const n=document.querySelector(e);n.innerHTML="";const o=document.createElement("Option");o.textContent="Default",n.appendChild(o);for(let e=0;e<t.length;e+=1){const o=document.createElement("Option");o.textContent=t[e].name,n.appendChild(o)}}let r=[],c=!1;r=null===localStorage.getItem("taskList")?[]:JSON.parse(localStorage.getItem("taskList"));const d=(t,e)=>{const n=document.createElement("tr");n.setAttribute("id",`tr${e}`);const o=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td"),d=document.createElement("td"),a=document.createElement("td"),l=document.createElement("td"),i=document.createElement("button"),m=document.createElement("button"),u=document.createElement("button"),s=document.createElement("select"),p=document.createElement("option"),C=document.createElement("option"),h=document.createElement("option");p.textContent="Low",C.textContent="Normal",h.textContent="Urgent",p.setAttribute("value","Low"),C.setAttribute("value","Normal"),h.setAttribute("value","Urgent"),s.appendChild(p),s.appendChild(C),s.appendChild(h),s.value=t.priority,s.setAttribute("class","form-select changePriority"),s.setAttribute("id",`changePriority${e}`),o.textContent=t.name,r.textContent=t.description,c.appendChild(s),d.textContent=t.project,a.textContent=t.dueDate,m.setAttribute("id",`dlt${e}`),m.setAttribute("class","m-2 btn btn-danger deleteTask"),m.textContent="Delete",u.setAttribute("id",`edit${e}`),u.setAttribute("class","m-2 btn btn-primary editTask"),u.textContent="Edit";const E=t.completed?"btn-success":"btn-danger",b=t.completed?"Completed":"Pending";return i.setAttribute("class",`completTask btn ${E}`),i.setAttribute("id",`btnCompleted${e}`),i.textContent=b,l.appendChild(i),l.appendChild(m),l.appendChild(u),n.appendChild(o),n.appendChild(r),n.appendChild(c),n.appendChild(d),n.appendChild(a),n.appendChild(l),n};function a(t){const e=document.createElement("table"),n=document.createElement("thead"),o=document.createElement("tr"),c=document.createElement("th"),a=document.createElement("th"),l=document.createElement("th"),i=document.createElement("th"),m=document.createElement("th"),u=document.createElement("th"),s=document.createElement("tbody");s.setAttribute("id","tableBody"),e.setAttribute("class","table"),n.setAttribute("class","thead-dark"),c.textContent="Name",a.textContent="Description",l.textContent="Priority",i.textContent="Project",m.textContent="Due date",u.textContent="Options",o.appendChild(c),o.appendChild(a),o.appendChild(l),o.appendChild(i),o.appendChild(m),o.appendChild(u),n.appendChild(o),e.appendChild(n);for(let e=0;e<r.length;e+=1)if(r[e].project===t||"all"===t){const t=d(r[e],e);s.appendChild(t)}return e.appendChild(s),e}function l(){document.querySelectorAll(".completTask").forEach((t=>{t.addEventListener("click",(()=>{var e;e=parseInt(t.id.match(/\d+/gm),10),r[e].completed?r[e].completed=!1:r[e].completed=!0,localStorage.setItem("taskList",JSON.stringify(r)),function(t){if(r[t].completed){const e=document.getElementById(`btnCompleted${t}`);e.setAttribute("class","completTask btn btn-danger"),e.textContent="Pending"}else{const e=document.getElementById(`btnCompleted${t}`);e.setAttribute("class","completTask btn btn-success"),e.textContent="Completed"}}(parseInt(t.id.match(/\d+/gm),10))}))}))}function i(){document.querySelectorAll(".changePriority").forEach((t=>{t.addEventListener("change",(()=>{var e,n;e=parseInt(t.id.match(/\d+/gm),10),n=t.value,r[e].priority=n,localStorage.setItem("taskList",JSON.stringify(r))}))}))}function m(){document.querySelectorAll(".deleteTask").forEach((t=>{t.addEventListener("click",(()=>{var e;e=parseInt(t.id.match(/\d+/gm),10),r.splice(e,1),localStorage.setItem("taskList",JSON.stringify(r)),function(t){const e=document.getElementById(`tr${t}`);document.getElementById("tableBody").removeChild(e)}(parseInt(t.id.match(/\d+/gm),10))}))}))}function u(){document.querySelectorAll(".editTask").forEach((t=>{t.addEventListener("click",(()=>{(function(t){const e=function(t,e){const n=document.createElement("tr");n.setAttribute("id","trForm");const o=document.createElement("td"),r=document.createElement("td"),c=document.createElement("td"),d=document.createElement("td"),a=document.createElement("td"),l=document.createElement("td"),i=document.createElement("option"),m=document.createElement("option"),u=document.createElement("option"),s=document.createElement("button");s.setAttribute("class","btn btn-primary updateTask"),s.setAttribute("id",`task${e}`),s.textContent="Save",i.textContent="Low",m.textContent="Normal",u.textContent="Urgent",i.setAttribute("value","Low"),m.setAttribute("value","Normal"),u.setAttribute("value","Urgent");const p=document.createElement("input");p.setAttribute("type","text"),p.setAttribute("id","formName");const C=document.createElement("input");C.setAttribute("type","text"),C.setAttribute("id","formDescription");const h=document.createElement("select");h.appendChild(i),h.appendChild(m),h.appendChild(u),h.setAttribute("id","formPriority");const E=document.createElement("select");E.setAttribute("id","editProjectForm");const b=document.createElement("input");return b.setAttribute("type","date"),b.setAttribute("id","formDate"),p.value=t.name,C.value=t.description,h.value=t.priority,b.value=t.dueDate,o.appendChild(p),r.appendChild(C),c.appendChild(h),d.appendChild(E),a.appendChild(b),l.appendChild(s),n.appendChild(o),n.appendChild(r),n.appendChild(c),n.appendChild(d),n.appendChild(a),n.appendChild(l),n}(r[t],t),n=document.getElementById(`tr${t}`);var d,a;n.setAttribute("hidden",!0),d=e,a=n,c||(a.parentNode.insertBefore(d,a.nextSibling),c=!0),o("#editProjectForm")})(parseInt(t.id.match(/\d+/gm),10)),function(){const t=document.querySelector(".updateTask");t.addEventListener("click",(()=>{const e=document.querySelector("#formName").value,n=document.querySelector("#formDescription").value,o=document.querySelector("#formPriority").value,d=document.querySelector("#editProjectForm").value,l=document.querySelector("#formDate").value,i=function(t,e,n,o,d,a){return r[t].name=e,r[t].description=n,r[t].priority=o,r[t].project=d,r[t].dueDate=a,localStorage.setItem("taskList",JSON.stringify(r)),c=!1,r[t].project}(parseInt(t.id.match(/\d+/gm),10),e,n,o,d,l),m=document.querySelector("#trForm");document.getElementById("tableBody").removeChild(m);const s=document.querySelector("#taskContainer");s.innerHTML="",s.append(a(i)),u()}))}()}))}))}function s(){document.querySelectorAll(".projectButton").forEach((t=>{t.addEventListener("click",(()=>{const e=document.querySelector("#taskContainer");e.innerHTML="",e.append(a(t.textContent)),l(),m(),i(),u()}))})),l(),m(),i(),u()}document.querySelector("#taskSubmit").addEventListener("click",(()=>{const t=document.querySelector("#taskContainer"),e=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,o=document.getElementById("taskPriority").value,c=document.getElementById("taskProject").value,d=document.getElementById("taskDueDate").value;t.innerHTML="",t.append(function(t,e,n,o,c){if(""===t||""===e||""===n||""===o||""===c)return"error";const d=((t,e,n,o,r,c)=>({name:t,description:e,priority:n,project:o,dueDate:r,completed:!1}))(t,e,n,o,c);return r.push(d),localStorage.setItem("taskList",JSON.stringify(r)),a("all")}(e,n,o,c,d)),s()})),document.querySelector("#projectSubmit").addEventListener("click",(()=>{const e=document.querySelector("#projectContainer"),r=document.getElementById("projectName").value;e.innerHTML="";const c=function(e){if(""===e)return"error";const o=(t=>({name:t}))(e);return t.push(o),localStorage.setItem("projectList",JSON.stringify(t)),n()}(r);if("error"===c){const t=document.createElement("p");t.textContent="Name can not be empty",e.append(t)}else e.append(c);o("#taskProject"),s()})),window.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector("#projectContainer"),e=document.querySelector("#taskContainer");e.innerHTML="",t.innerHTML="",t.append(n()),e.append(a("all")),o("#taskProject"),s()}))})();