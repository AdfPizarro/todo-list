(()=>{"use strict";let t=[];t=null===localStorage.getItem("projectList")?[]:JSON.parse(localStorage.getItem("projectList"));const e=t=>({name:t}),n=t=>{const e=document.createElement("div");e.setAttribute("class","d-flex flex-column");const n=document.createElement("a");return n.setAttribute("class","projectButton text-decoration-none"),n.setAttribute("href","#"),n.textContent=t.name,e.appendChild(n),e};function o(){let e=document.createElement("div");const o=document.createElement("a");o.setAttribute("class","projectButton text-decoration-none"),o.setAttribute("href","#"),o.textContent="Default",e.appendChild(o);for(let o=0;o<t.length;o+=1){const c=n(t[o].name);e.appendChild(c)}return e}function c(){const e=document.querySelector("#taskProject");e.innerHTML="";const n=document.createElement("Option");n.textContent="Default",e.appendChild(n);for(let n=0;n<t.length;n+=1){const o=document.createElement("Option");o.textContent=t[n].name.name,e.appendChild(o)}}let a=[];a=null===localStorage.getItem("taskList")?[]:JSON.parse(localStorage.getItem("taskList"));const r=(t,e)=>{const n=document.createElement("tr"),o=document.createElement("td"),c=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),d=document.createElement("td"),l=document.createElement("button"),i=document.createElement("button"),s=document.createElement("select"),m=document.createElement("option"),u=document.createElement("option"),p=document.createElement("option");m.textContent="Low",u.textContent="Normal",p.textContent="Urgent",m.setAttribute("value","Low"),u.setAttribute("value","Normal"),p.setAttribute("value","Urgent"),s.appendChild(m),s.appendChild(u),s.appendChild(p),s.value=t.priority,s.setAttribute("class","form-select changePriority"),s.setAttribute("id",`changePriority${e}`),o.textContent=t.name,c.textContent=t.description,a.appendChild(s),r.textContent=t.dueDate,i.setAttribute("id",`dlt${e}`),i.setAttribute("class","mx-2 btn btn-danger deleteTask"),i.textContent="Delete";const C=t.completed?"btn-success":"btn-danger",h=t.completed?"Completed":"Pending";return l.setAttribute("class",`completTask btn ${C}`),l.setAttribute("id",`btnCompleted${e}`),l.textContent=h,d.appendChild(l),n.appendChild(o),n.appendChild(c),n.appendChild(a),n.appendChild(r),n.appendChild(d),d.appendChild(i),n};function d(t){const e=document.createElement("table"),n=document.createElement("thead"),o=document.createElement("tr"),c=document.createElement("th"),d=document.createElement("th"),l=document.createElement("th"),i=document.createElement("th"),s=document.createElement("th"),m=document.createElement("tbody");e.setAttribute("class","table"),n.setAttribute("class","thead-dark"),c.textContent="Name",d.textContent="Description",l.textContent="Priority",i.textContent="Due date",s.textContent="Options",o.appendChild(c),o.appendChild(d),o.appendChild(l),o.appendChild(i),o.appendChild(s),n.appendChild(o),e.appendChild(n);for(let e=0;e<a.length;e+=1)if(a[e].project==t||"all"===t){const t=r(a[e],e);m.appendChild(t)}return e.appendChild(m),e}function l(){document.querySelectorAll(".projectButton").forEach((t=>{t.addEventListener("click",(()=>{taskContainer.innerHTML="",taskContainer.append(d(t.textContent)),i(),m(),s()}))})),i(),m(),s()}function i(){document.querySelectorAll(".completTask").forEach((t=>{t.addEventListener("click",(()=>{!function(t){if(a[t].completed){a[t].completed=!1;const e=document.getElementById(`btnCompleted${t}`);e.setAttribute("class","completTask btn btn-danger"),e.textContent="Pending"}else{a[t].completed=!0;const e=document.getElementById(`btnCompleted${t}`);e.setAttribute("class","completTask btn btn-success"),e.textContent="Completed"}localStorage.setItem("taskList",JSON.stringify(a))}(parseInt(t.id.match(/\d+/gm)))}))}))}function s(){document.querySelectorAll(".changePriority").forEach((t=>{t.addEventListener("change",(()=>{var e,n;e=parseInt(t.id.match(/\d+/gm)),n=t.value,a[e].priority=n,localStorage.setItem("taskList",JSON.stringify(a))}))}))}function m(){document.querySelectorAll(".deleteTask").forEach((t=>{t.addEventListener("click",(()=>{taskContainer.innerHTML="",taskContainer.append(function(t){const e=a.splice(t,1);return localStorage.setItem("taskList",JSON.stringify(a)),d(e[0].project)}(parseInt(t.id.match(/\d+/gm)))),l()}))}))}document.querySelector("#taskSubmit").addEventListener("click",(()=>{const t=document.querySelector("#taskContainer"),e=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,o=document.getElementById("taskPriority").value,c=document.getElementById("taskProject").value,r=document.getElementById("taskDueDate").value;t.innerHTML="",t.append(function(t,e,n,o,c){const r=((t,e,n,o,c,a)=>({name:t,description:e,priority:n,project:o,dueDate:c,completed:!1}))(t,e,n,o,c);return a.push(r),localStorage.setItem("taskList",JSON.stringify(a)),d("all")}(e,n,o,c,r)),l()})),document.querySelector("#projectSubmit").addEventListener("click",(()=>{const n=document.querySelector("#projectContainer"),a=document.getElementById("projectName").value;n.innerHTML="",n.append(function(n){const c={name:e(n)};return t.push(c),localStorage.setItem("projectList",JSON.stringify(t)),o()}(a)),c(),l()})),window.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector("#projectContainer"),e=document.querySelector("#taskContainer");e.innerHTML="",t.innerHTML="",t.append(o()),e.append(d("all")),c(),l()}))})();