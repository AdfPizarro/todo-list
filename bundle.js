(()=>{"use strict";let e=[];e=null===localStorage.getItem("projectList")?[]:JSON.parse(localStorage.getItem("projectList"));const t=e=>({name:e}),n=e=>{const t=document.createElement("div");t.setAttribute("class","d-flex flex-column");const n=document.createElement("a");return n.setAttribute("class","projectButton text-decoration-none"),n.setAttribute("href","#"),n.textContent=e.name,t.appendChild(n),t};function o(){let t=document.createElement("div");const o=document.createElement("a");o.setAttribute("class","projectButton text-decoration-none"),o.setAttribute("href","#"),o.textContent="Default",t.appendChild(o);for(let o=0;o<e.length;o+=1){const c=n(e[o].name);t.appendChild(c)}return t}function c(){const t=document.querySelector("#taskProject");t.innerHTML="";const n=document.createElement("Option");n.textContent="Default",t.appendChild(n);for(let n=0;n<e.length;n+=1){const o=document.createElement("Option");o.textContent=e[n].name.name,t.appendChild(o)}}let a=[];null===localStorage.getItem("taskList")?a=[]:(a=JSON.parse(localStorage.getItem("taskList")),console.log(a));const d=(e,t)=>{const n=document.createElement("tr"),o=document.createElement("td"),c=document.createElement("td"),a=document.createElement("td"),d=document.createElement("td"),l=document.createElement("td"),r=document.createElement("button");o.textContent=e.name,c.textContent=e.description,a.textContent=e.priority,d.textContent=e.dueDate;const m=e.completed?"btn-success":"btn-danger",i=e.completed?"Completed":"Pending";return r.setAttribute("class",`completTask btn ${m}`),r.setAttribute("id",`btnCompleted${t}`),r.textContent=i,l.appendChild(r),n.appendChild(o),n.appendChild(c),n.appendChild(a),n.appendChild(d),n.appendChild(l),n};function l(e){const t=document.createElement("table"),n=document.createElement("thead"),o=document.createElement("tr"),c=document.createElement("th"),l=document.createElement("th"),r=document.createElement("th"),m=document.createElement("th"),i=document.createElement("th"),s=document.createElement("tbody");t.setAttribute("class","table"),n.setAttribute("class","thead-dark"),c.textContent="Name",l.textContent="Description",r.textContent="Priority",m.textContent="Due date",i.textContent="Completed",o.appendChild(c),o.appendChild(l),o.appendChild(r),o.appendChild(m),o.appendChild(i),n.appendChild(o),t.appendChild(n);for(let t=0;t<a.length;t+=1)if(a[t].project==e||"all"===e){const e=d(a[t],t);s.appendChild(e)}return t.appendChild(s),t}function r(){document.querySelectorAll(".projectButton").forEach((e=>{e.addEventListener("click",(()=>{taskContainer.innerHTML="",taskContainer.append(l(e.textContent))}))}))}document.querySelector("#taskSubmit").addEventListener("click",(()=>{const e=document.querySelector("#taskContainer"),t=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,o=document.getElementById("taskPriority").value,c=document.getElementById("taskProject").value,d=document.getElementById("taskDueDate").value;e.innerHTML="",e.append(function(e,t,n,o,c){const d=((e,t,n,o,c,a)=>({name:e,description:t,priority:n,project:o,dueDate:c,completed:!1}))(e,t,n,o,c);return a.push(d),localStorage.setItem("taskList",JSON.stringify(a)),l("all")}(t,n,o,c,d)),r()})),document.querySelector("#projectSubmit").addEventListener("click",(()=>{const n=document.querySelector("#projectContainer"),a=document.getElementById("projectName").value;n.innerHTML="",n.append(function(n){const c={name:t(n)};return e.push(c),localStorage.setItem("projectList",JSON.stringify(e)),o()}(a)),c(),r()})),window.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#projectContainer"),t=document.querySelector("#taskContainer");t.innerHTML="",e.innerHTML="",e.append(o()),t.append(l("all")),c(),r(),document.querySelectorAll(".completTask").forEach((e=>{e.addEventListener("click",(()=>{!function(e){if(a[e].completed){a[e].completed=!1;const t=document.getElementById(`btnCompleted${e}`);t.setAttribute("class","completTask btn btn-danger"),t.textContent="Pending"}else{a[e].completed=!0;const t=document.getElementById(`btnCompleted${e}`);t.setAttribute("class","completTask btn btn-success"),t.textContent="Completed"}localStorage.setItem("taskList",JSON.stringify(a))}(parseInt(e.id.match(/\d+/gm)))}))}))}))})();